(this.webpackJsonpweb_project=this.webpackJsonpweb_project||[]).push([[0],{38:function(e,t,c){},40:function(e,t,c){},45:function(e,t,c){"use strict";c.r(t);var a=c(2),n=c.n(a),r=c(23),s=c.n(r),i=c(5),o=c(15);c(31),c(33);o.a.initializeApp({apiKey:"AIzaSyBc9559594cbGbQYY57xRTe128rYDyzpRs",authDomain:"web-project-c3c1a.firebaseapp.com",databaseURL:"https://web-project-c3c1a-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"web-project-c3c1a",storageBucket:"web-project-c3c1a.appspot.com",messagingSenderId:"271084988333",appId:"1:271084988333:web:9cd56e8f8d16f9c6a6e324"});var u=o.a.auth(),l=o.a.database(),j=c(25),b=c(6),d=c(19),O=c.n(d),h=c(24),p=(c(38),c(3));var m=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(""),s=Object(i.a)(r,2),o=s[0],j=s[1],b=Object(a.useState)(""),d=Object(i.a)(b,2),m=d[0],x=d[1],f=Object(a.useState)("S"),v=Object(i.a)(f,2),g=v[0],S=v[1],N=Object(a.useState)(!1),k=Object(i.a)(N,2),y=k[0],C=k[1],w=Object(a.useState)(""),I=Object(i.a)(w,2),_=I[0],L=I[1],E=function(e){var t=e.target,c=t.name,a=t.value;"email"===c?n(a):"password"===c?j(a):x(a)},A=function(){var e={job:g,name:m};l.ref("user/"+c).update(e)},B=function(){var e=Object(h.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!y){e.next=8;break}return e.next=5,u.createUserWithEmailAndPassword(c+"@gmail.com",o);case 5:A(),e.next=10;break;case 8:return e.next=10,u.signInWithEmailAndPassword(c+"@gmail.com",o);case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),L(e.t0.message),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),D=function(e){var t=e.target.value;S(t)};return Object(p.jsxs)("div",{className:"login-page",children:[Object(p.jsx)("header",{className:"main-title",children:Object(p.jsx)("h1",{children:"Code Viewer"})}),Object(p.jsxs)("form",{onSubmit:B,"aria-label":"login form",className:"login",children:[Object(p.jsxs)("div",{className:"auth-input",children:[Object(p.jsx)("input",{name:"email",value:c,placeholder:"ID",type:"text",required:!0,onChange:E}),Object(p.jsx)("input",{name:"password",value:o,placeholder:"Passward",type:"password",required:!0,onChange:E}),!0===y&&Object(p.jsx)("input",{name:"user_name",value:m,placeholder:"Name",type:"text",required:!0,onChange:E}),!0===y&&Object(p.jsxs)("div",{className:"radio-job",children:[Object(p.jsx)("label",{htmlFor:"radio-s",className:"radio-label",children:"Student"}),Object(p.jsx)("input",{id:"radio-s",type:"radio",name:"job",value:"S",onChange:D}),Object(p.jsx)("label",{htmlFor:"radio-i",className:"radio-label",children:"Instructor"}),Object(p.jsx)("input",{id:"radio-i",type:"radio",name:"job",value:"I",onChange:D})]}),!0===y&&Object(p.jsx)("input",{type:"submit",value:"Create",className:"create-button"})]}),!1===y&&Object(p.jsx)("input",{type:"submit",value:"Login",className:"login-button"})]}),Object(p.jsx)("strong",{"aria-label":"error message",children:_}),Object(p.jsx)("button",{type:"button",className:"create-account-button",onClick:function(){C(!y),n(""),j(""),x(""),L("")},children:y?"Login page":"Create account"})]})};var x=function(e){var t=e.id,c=e.student,a=e.clicked_id,n=e.onClickStudent;return Object(p.jsx)("div",{className:"nav-name",children:Object(p.jsx)("li",{children:Object(p.jsx)("ul",{children:Object(p.jsxs)("button",{type:"button",value:t,onClick:n,style:{backgroundColor:t===a?"white":"#283b5b",color:t===a?"#283b5b":"#7c95c3"},children:[c," "]})})})})};var f=function(e){var t=e.title,c=e.date,a=e.clicked_title,n=e.onClickTitle;return Object(p.jsxs)("ul",{style:{background:a===t?"rgb(183,186,175)":"#363d49"},children:[Object(p.jsx)("button",{type:"button",value:t,onClick:n,style:{background:a===t?"rgb(183,186,175)":"#363d49",color:a===t?"#363d49":"#d5d9e2"},children:t}),Object(p.jsx)("button",{type:"button",value:t,onClick:n,style:{background:a===t?"rgb(183,186,175)":"#363d49",color:a===t?"#363d49":"#d5d9e2"},children:c})]})};var v=function(e){var t=e.line;return Object(p.jsxs)("pre",{children:[t,Object(p.jsx)("br",{})]})};c(40);var g=function(e){var t=e.users,c=e.codes,n=Object(a.useState)([]),r=Object(i.a)(n,2),s=r[0],o=r[1],l=Object(a.useState)([]),j=Object(i.a)(l,2),b=j[0],d=j[1],O=Object(a.useState)([]),h=Object(i.a)(O,2),m=h[0],g=h[1],S=Object(a.useState)(""),N=Object(i.a)(S,2),k=N[0],y=N[1],C=Object(a.useState)(""),w=Object(i.a)(C,2),I=w[0],_=w[1],L=Object(a.useState)(""),E=Object(i.a)(L,2),A=E[0],B=E[1],D=Object(a.useState)(!1),q=Object(i.a)(D,2),z=q[0],P=q[1],R=Object(a.useState)(""),T=Object(i.a)(R,2),U=T[0],Y=T[1],F=Object(a.useState)(""),J=Object(i.a)(F,2),V=J[0],W=J[1];Object(a.useEffect)((function(){G()}),[]);var G=function(){t&&M(),c&&K()},K=function(){var e=Object.keys(c).map((function(e){return[e,c[e].id]})).sort((function(e,t){return e[1]<t[1]?1:-1})).map((function(e){return e[0]}));d(e)},M=function(){var e=u.currentUser.email.split("@")[0],c=t[e].job;Q("I"===c?"S":"I",e)},Q=function(e,c){var a=Object.keys(t).filter((function(c){return t[c].job===e})).map((function(e){return[e,t[e].name]})).sort((function(e,t){return e[1]<t[1]?-1:1})),n=[c];a.map((function(e){n.push(e[0])})),o(n),B(t[c].name)},H=function(e){var t=e.target.value,a=b.filter((function(e){return c[e].user_id===t}));s.map((function(){return!1}));y(""),_(""),Y(t),W(""),g(a)},X=function(e){var t=e.target.value,a=c[t].text,n=[t,c[t].date];W(t),y(a),_(n)};return Object(p.jsxs)("div",{className:"home-page",children:[Object(p.jsxs)("header",{className:"head-title",children:[Object(p.jsx)("h1",{children:"Code Viewer"}),Object(p.jsx)("button",{className:"name-button",type:"button",onClick:function(){P(!z)},children:A}),z&&Object(p.jsx)("div",{className:"logout-container",children:Object(p.jsx)("button",{className:"logout-button",onClick:function(){u.signOut()},children:"LogOut"})})]}),Object(p.jsxs)("div",{className:"under-container",children:[Object(p.jsx)("nav",{className:"nav-container",children:0!==s.length?s.map((function(e){return Object(p.jsx)(x,{id:e,student:t[e].name,clicked_id:U,onClickStudent:H})})):Object(p.jsx)("strong",{children:"No Student"})}),Object(p.jsx)("aside",{className:"aside-container",children:Object(p.jsx)("li",{children:0!==m.length?m.map((function(e){return Object(p.jsx)(f,{title:e,date:c[e].date,clicked_title:V,onClickTitle:X})})):Object(p.jsx)("ul",{className:"no-code",children:"No Code"})})}),Object(p.jsxs)("main",{className:"main-container",children:[Object(p.jsxs)("strong",{className:"view-title",children:[Object(p.jsx)("h1",{children:I[0]}),Object(p.jsx)("h2",{children:I[1]})]}),Object(p.jsx)("div",{className:"code-view",children:k.split("\n").map((function(e){return Object(p.jsx)(v,{line:e})}))})]})]})]})};var S=function(e){var t=e.isLogined,c=e.users,a=e.codes;return Object(p.jsx)(j.a,{children:Object(p.jsx)(b.c,{children:t?Object(p.jsx)(b.a,{exact:!0,path:"/",children:Object(p.jsx)(g,{users:c,codes:a})}):Object(p.jsx)(b.a,{exact:!0,path:"/",component:m})})})};var N=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(!1),s=Object(i.a)(r,2),o=s[0],j=s[1],b=Object(a.useState)(null),d=Object(i.a)(b,2),O=d[0],h=d[1],m=Object(a.useState)(null),x=Object(i.a)(m,2),f=x[0],v=x[1];Object(a.useEffect)((function(){u.onAuthStateChanged((function(e){e?(j(!1),n(!0)):(j(!0),n(!1))}))}),[]),Object(a.useEffect)((function(){c&&(g(),N())}),[c]);var g=function(){l.ref("user").get().then((function(e){e.exists()?h(e.val()):console.log("No data available")})).catch((function(e){console.error(e)}))},N=function(){l.ref("/").child("code").orderByChild("id").get().then((function(e){e.exists()?v(e.val()):console.log("No data available"),j(!0)})).catch((function(e){console.error(e)}))};return Object(p.jsx)("div",{children:o?Object(p.jsx)(S,{isLogined:c,users:O,codes:f}):Object(p.jsx)("h1",{children:"Loding"})})};s.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(N,{})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.4e6cfa92.chunk.js.map